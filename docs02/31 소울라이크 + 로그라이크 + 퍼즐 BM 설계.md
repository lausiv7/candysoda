"소울라이크 + 로그라이크 + 퍼즐" BM 설계안을 러프하게 구성해 드릴게요.
핵심은 궁수의 전설의 성장·BM 구조를 캔디소다류 퍼즐에 맞게 변형하는 것입니다.

1. 핵심 BM 구조 비교
요소	궁수의 전설(원본)	퍼즐형 로그라이크 변형
실력 요소	컨트롤 + 회피 + 패턴 대응	퍼즐 패턴 분석 + 연쇄 최적화
장비 강화	무기·방어구·반지 (가챠·구매)	특수 블록·스킨·퍼즐 아이템 세트 (가챠·구매)
성장 보상	스테이지별 랜덤 3옵션 중 선택	스테이지별 랜덤 3스탯(시간 추가, 특수블록 확률, 콤보 보너스) 중 선택
에너지 제한	30분당 5번 회복	2030분당 5판 회복 (한 판 35분)
권장 전투력	장비+스탯 기반	아이템 파워+퍼즐 스킬 기반
난이도 조정	권장 전투력 vs 현재 전투력	스테이지 난이도 vs 현재 스탯/아이템

2. 스테이지 설계 알고리즘 (BM 핵심)
목표: 플레이어 실력과 지출에 따라 난이도 곡선을 자동 조정

pseudo
복사
편집
플레이어_실력 = 최근 5판 평균 점수 / 스테이지 권장 점수
플레이어_전투력 = 장비 스탯 + 스킬 보정치
난이도_계수 = (플레이어_실력 * 0.7 + 플레이어_전투력 * 0.3)

if 난이도_계수 < 1:
    다음 스테이지 난이도 ↓ (실패 확률 감소)
elif 난이도_계수 > 1.2:
    다음 스테이지 난이도 ↑ (성공 확률 조정)
실력은 퍼즐 해결 속도·콤보 수·남은 시간 등으로 계산

전투력은 구매 아이템(장비), 누적 강화, 일시 버프 합산

BM 핵심: 유저가 구매 없이도 조금씩 진척하지만, 구매 시 빠른 스테이지 클리어 가능

3. 로그라이크 요소 (퍼즐 변형)
3.1. 스테이지 중 버프 선택
매 스테이지 클리어 시 3개 중 1개 선택 (궁수의 전설의 룬 선택처럼)

⏳ 시간 +10초

🔥 특수블록 생성 확률 +15%

💥 콤보 데미지 +25%

이 버프는 해당 플레이 세션에만 적용 (다음 세션 초기화)

운 요소를 추가해 리플레이 가치↑

3.2. 장비·아이템
상시 소유 장비 = 돈으로만 획득·업그레이드 가능

예: "황금망치" → 퍼즐에서 특정 블록 즉시 파괴

예: "마법장갑" → 한 번에 블록 5개 이상 시 추가 보너스

가챠 BM

무료 뽑기(8시간 간격)

유료 뽑기(1~10연차)

확률업 이벤트(한정 장비)

4. 에너지 시스템 (번개)
번개 = 플레이 에너지

20~30분당 1개 회복

최대 5개 보유 가능

한 판 소모량: 1개

구매 옵션:

1,000코인 → 번개 +5

번개 무제한 1시간 → 유료 패키지

5. UI 구성 (궁수의 전설 스타일 차용)
로비

좌측: 플레이 버튼 (현재 스테이지)

우측: 장비/가챠/상점/퀘스트

하단: 이벤트·광고 보상 버튼

스테이지

상단: 남은 시간, 점수, 번개

하단: 3가지 스킬 슬롯(구매·광고로 충전 가능)

클리어 후

버프 3개 중 선택

보상 수령(코인·가챠권)

6. BM 시나리오 예시
BM 요소	무료 플레이어	유료 플레이어
장비	기본 2~3성	4~5성 희귀 장비
버프	랜덤	랜덤 + 유료 재선택
번개	하루 10판 내외	하루 무제한
스테이지 속도	평균	1.5~2배 빠름

7. 적용 전략
레벨 디자인 자동화

난이도·보상曲선을 스프레드시트 기반으로 시뮬레이션

자동테스트 봇으로 10만 판 시뮬레이션 → 실패율·클리어 타임 조정

로그라이크+퍼즐 융합

매판 버프 선택 → 반복플레이 동기 부여

장비·아이템 → 장기 성장 BM

초기 BM 출시 전략

출시 2주차까지 무료 보상 폭넓게 제공

3주차부터 장비·에너지·버프 재선택 유료화




개요
이 문서는 퍼즐 + 로그라이크(궁수의 전설 스타일) BM을 퍼즐 게임 엔진에 적용하기 위한 기술·디자인 가이드입니다.
목표는 (1) 스테이지 난이도 곡선 설계, (2) 유저별 과금(구매) 동기 모델링, (3) 버프·장비 효과 밸런스안을 제시하고, (4) 자동 시뮬레이션을 통한 튜닝·검증 절차를 제공하는 것입니다.

1. 용어 정리 / 전제
한 판(라운드): 플레이 시간 3–5분 (기본값 4분)

번개(에너지): 플레이 횟수 자원. 회복 속도: 30분당 1(예: 5개 최대) — 문서에서 파라미터로 설정 가능

버프(룬): 로그라이크 세션 내 일시적 스탯 보정, 스테이지 클리어 시 3중 선택

장비: 영구적/장기적 스탯 증가, 주로 유료(가챠/상점)

유저 전투력(Power): 장비 + 영구 업그레이드 수치 (숫자 척도)

유저 실력(Skill): 플레이 성능 지표(평균 점수, 성공률, 남은 시간 등으로 산출)

권장 난이도(Recommendation Rating): 스테이지에 기대되는 전투력/스킬을 숫자로 표기

2. 스테이지 난이도 곡선 설계
2.1 핵심 아이디어
난이도는 (A) 장비·영구 파워(화폐로 획득 가능)와 (B) 플레이어 실력(반복 플레이로 향상)을 모두 반영해야 함.
즉 EffectivePlayerStrength = f(Power, Skill)을 기준으로 스테이지 요구치를 동적으로 조정.

2.2 기본 수식 (권장)
플레이어 지표:

Power = sum(장비 스탯) + persistent bonuses

Skill = w1 * normalized(avg_moves/level) + w2 * normalized(combo_rate) + w3 * normalized(avg_remaining_time)

EffectiveStrength = α * Power + β * Skill (α,β ≥ 0; 기본 α=0.6, β=0.4)

스테이지 요구치(권장 전투력):

StageRequirement(stage) = base * growth^(stage-1)

base: 처음 스테이지 요구치 (e.g., 100)

growth: 난이도 성장계수 (예: 1.08 ~ 1.12)

난이도 차이:

Gap = EffectiveStrength / StageRequirement

성공 확률 모델 (로짓):

P_success = 1 / (1 + exp(-k*(log(Gap) - m)))

k: 민감도 (예: 4), m: 중앙값(예: 0)

(Gap=1 → P_success≈0.5 if m=0)

2.3 동적 난이도 조정(DDA) 규칙 (예시)
실시간(스테이지 선택 시) 조정:

만약 Gap < 0.8 (너무 어려움) → 스테이지 내부에서 소폭 완화(예: 특수블록 10% 증가 또는 목표 감소 5~10%)

만약 Gap > 1.3 (너무 쉬움) → 노멀 유지 혹은 소폭 강화(보상 증가로 더 높은 리텐션 유도)

장기 조정(세션 간):

최근 N판(예: 10판) 평균 Gap이 0.7 이하이면 다음 세션 시작 시 보너스 버프 제공(예: 시간+10초)으로 진입 장벽 완화

평균 Gap이 1.4 이상이면 더 좋은 보상(더 많은 코인 / 더 높은 가챠티켓 확률)을 제공해 '성취 보상' 유도

2.4 파라미터 권장값 (테스트 스타팅 포인트)
base = 100, growth = 1.10

α=0.6, β=0.4

DDA thresholds: easy_cutoff=0.8, hard_cutoff=1.3

P_success logits: k=6, m=0 (더 민감한 반응)

3. 유저별 과금 동기(Conversion) 예측 모델
3.1 핵심 요인(Features)
Progress Friction (PF): 난이도와 유저 능력의 불일치(예: Gap < 0.7) → 좌절감 ↑

Loss Streak (LS): 연속 실패 횟수 (exponential 영향)

Resource Scarcity (RS): 번개 부족 또는 중요한 아이템 부족

Reward Magnitude (RM): 유료로 획득 가능한 임시/영구 보상 큼

Social Signals (SS): 친구 리더보드, 이벤트 참여

Player Value Segment (PVS): 잠재지출력(초기 거래/과거 구매)

3.2 모델 (로지스틱 회귀 기반 확률)
logit(purchase) = b0 + b1*PF + b2*LS + b3*RS + b4*RM + b5*PVS + b6*recent_success

확률: P_buy = sigmoid(logit)

3.3 가중치(초기 추정값)
b0 = -3.0 (base)

b1 (PF) = 2.0 (좌절감 → 아이템 구매 유도)

b2 (LS) = 0.5

b3 (RS) = 1.5

b4 (RM) = 1.0

b5 (PVS) = 2.5 (유저 세그먼트 중요)

b6 (recent_success) = -1.0 (성공하면 구매 덜함)

예시: PF 높음(좌절 ↑) & RS 높음(번개 없음) → 구매 확률 급증

3.4 실무 적용
데이터 피처 수집: 레벨 시작시 Gap, 연속 실패 카운트, 번개 잔량, 최근 구매/세션 활동

온라인 학습: 초기값으로 A/B 테스트 후 회귀 계수 재학습

활용: UI에서 '구매 제안'을 노출할 확률을 계산해서 확률 임계값(예: >0.2) 이상이면 팝업 제시

4. 버프·장비 효과 설계 및 밸런스
4.1 카테고리
Session Buffs (선택형, 로그라이크형): 세션 한정, 스테이지 클리어 시 3중 선택 (무료/교환 가능)

예: +Time, +SpecialBlockRate, +ComboMultiplier, +StartingCombo

Consumables / Boosters (유료 또는 광고 보상): 즉시 사용, 단기(한 판) 효과

예: ExtraMove +3, DoubleScore for 60s

Equipment (영구/반영구, 가챠/상점): 장기 파워, 인벤토리 관리, 강화 시스템

예: Amulet of Chains (특수 블록 생성률 +5%), Gloves(+1 starting combo)

4.2 수치 설계 원칙
평균 효과 스케일: Session buff ≈ consumable 효과의 0.8~1.5배 (세션 지속성 차이)

장비 효과 범위: 장비의 스탯은 누적되므로 개별 장비는 작게(예: +1~+5%) 하되 조합으로 강해짐

희귀도 기반 강화: 일반 < 희귀 < 영웅 < 전설 — 각 레벨에서 효과는 약 1.5x 증가

4.3 예: 초기 밸런스 테이블
항목	타입	효과(샘플)	희귀도/비고
Time+10	Session Buff	시간 +10s	Common
SpecialBlock+15%	Session Buff	정규 블록→특수블록 확률 +15%	Rare
Combo+25%	Session Buff	콤보 데미지 +25%	Epic
ExtraMove+3	Consumable	추가 이동 +3 (단판)	Purchase/Ad
Amulet (Common)	Equipment	특수블록 확률 +2%	Gacha
Gloves (Legend)	Equipment	시작콤보 +2, 특수블록+5%	Gacha + rarity

4.4 장비 강화/조합 법칙
강화 비용은 지수 증가: cost(n) = base * r^n (base=100, r=1.6)

장비 합성(예: 3개 → 상위 희귀도) 표준 룰 적용

4.5 밸런싱 목표 예시(수치 목표)
일반 플레이어(무과금)의 평균 클리어율(스테이지 X) = 40–60%

유료 장비 보유자의 동일 스테이지 성공률 +15–30%

Session buff 선택으로 즉시 성공확률 +10–30% (buff 의존성 관리)

5. 시뮬레이션 & 자동 테스트 지침 (핵심)
5.1 목적
레벨 디자인·BM 파라미터가 실제 유저 행동(성공률, 구매율)에 미치는 영향 예측

대규모 몬테카를로 시뮬레이션으로 파라미터 튜닝

5.2 시뮬레이터 입력 (CSV/JSON)
PlayerSegment: {power_mean, power_sd, skill_mean, skill_sd, PVS}

StageSpec: {stage_id, requirement}

BuffPool: list of buffs (effect magnitude, probability)

ShopPrices: equipment/gacha pricing & odds

5.3 시뮬레이터 로직 (pseudocode)
python
복사
편집
for user in users:
    user.power = sample_normal(power_mean, power_sd)
    user.skill = sample_normal(skill_mean, skill_sd)
    for stage in stages:
        EffectiveStrength = α*user.power + β*user.skill
        Gap = EffectiveStrength / StageRequirement(stage)
        P_success = logistic(k*(log(Gap)-m))
        success = random() < P_success
        if not success:
            user.loss_streak += 1
            # check for purchase prop
            pf = max(0, 1 - Gap)
            logit = b0 + b1*pf + b2*user.loss_streak + ...
            if sigmoid(logit) > buy_threshold:
                purchase()
        else:
            user.loss_streak = 0
            # reward & buff selection: randomly sample buff options
5.4 시뮬레이션 산출물
스테이지별 성공률, 평균 시도 횟수

세그먼트별(무/소/중/고지출) ARPU, conversion rate

보상·버프 선택 빈도

민감도 분석(파라미터 변화에 따른 KPI 변화)

5.5 구현 권장 툴
Python (pandas, numpy) 또는 Node.js

수치 결과를 Google Sheet로 export(시각화)

매 시뮬레이션에 대해 seed 고정하여 재현 가능하게 함

6. 계측(메트릭스) 및 A/B 테스트 전략
6.1 핵심 KPI
Retention D1/D7/D30

Conversion Rate (purchase / paying users)

ARPU / ARPPU / LTV(30-day)

Average Session Length, Sessions per DAU

Stage Clear Rate & Average Attempts per Stage

Loss Streak Distribution

6.2 A/B 테스트 항목 예시
Buff 종류 3개 vs 4개에서 선택(클리어율 변화)

번개 회복 속도(20min/30min) 영향

Gacha pity-system 도입 여부(매 n회 보장)

장비 효과 범위 변경(예: +2% → +3%)

6.3 A/B 실험 설계 팁
목표 KPI와 최소 검정 크기(통계 파워) 사전에 계산

실험 기간: 2주 이상 권장(유저 행동 안정화)

피처 플래그(Remote Config)로 실시간 전환

실험 결과는 통계적 유의성(95%) 확인 후 채택

7. 구현 가이드 (엔진/모듈 수준)
7.1 데이터 모델(샘플 JSON)
json
복사
편집
{
  "user": {
    "id": "uuid",
    "power": 120,
    "skill": 0.73,
    "loss_streak": 0,
    "energy": 3,
    "inventory": {"amulet_common": 1}
  },
  "stage": {
    "id": 42,
    "requirement": 250
  },
  "buff": {
    "id": "time_plus_10",
    "type": "session",
    "effect": {"time": +10},
    "rarity": "common"
  }
}
7.2 추천 API / 서버 엔드포인트
GET /api/stage/:id/recommendation?userId=... → returns StageRequirement + suggested buffs/advice

POST /api/user/:id/action → records start/finish/fail events (used for metrics)

POST /api/purchase → handle purchase, update Power & persist

GET /api/simulate?params=... → admin-only endpoint to run quick sims

7.3 클라이언트 구현 포인트
Stage selection screen: show recommended vs your strength progress bar (Gap)

On start: if Gap < 0.75 show helpful suggestions (tip & buff offer)

After fail: show 'one-time continue' offer (consumable purchase) with calculated P_buy

8. 운영·튜닝 프로세스 (롤아웃)
파일럿(Internal): 소규모(1k users)로 초기 파라미터 집행, 시뮬레이터 결과와 대조

오픈 실험(A/B): 50/50 split, 2주 집행

지표 모니터링: 실시간 대시보드(클리어율, 구매율)

계수 재학습: 매주/매 2주 수집 데이터로 환산 계수(로지스틱 회귀) 재학습

점진적 롤아웃: 전체 배포(10%→50%→100%)와 함께 모니터링, 이상시 롤백

9. 예제 파라미터 세트 (출발점)
baseRequirement = 100

growth = 1.10

α=0.6, β=0.4

DDA: easy_cutoff=0.8, hard_cutoff=1.3

Conversion model b = [-3.0, 2.0 (PF), 0.5 (LS), 1.5 (RS), 1.0 (RM), 2.5 (PVS), -1.0 (success)]

10. 체크리스트(개발 적용 시)
 데이터 로깅: stage start/finish/fail, buff choices, purchases, energy events

 시뮬레이터 코드 작성 및 검증(100k runs 권장)

 A/B 테스트 준비(원격 구성, 실험 flag)

 대시보드(클리어율, ARPU, conversion) 연결

 장비/gacha 확률 테이블 정의 & 확률 감사 로직

 정책(어린이 보호, 확률 공개 등) 준수