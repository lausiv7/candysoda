# Sweet Puzzle Phase 1 테스트 시나리오

## 개요

Sweet Puzzle의 03 퍼즐 시스템 Phase 1 구현에 대한 종합적인 테스트 시나리오입니다. 기본 3매치 퍼즐 로직, 블록 시스템, 매치 감지, 이동 검증, 중력 시스템 등 핵심 기능들을 체계적으로 검증합니다.

---

## 1. 🧩 기본 매치-3 로직 테스트

### 1.1 수평 매치 테스트

**목표**: 3개 이상의 수평 매치 감지 및 처리 검증

**테스트 케이스**:
```javascript
// 콘솔에서 실행 가능한 테스트 코드
// 1. 기본 3매치 테스트
game.testMove(2, 4, 3, 4); // 수평 3매치 생성

// 2. 4매치 테스트 (특수 블록 생성 확인)
game.testMove(1, 3, 2, 3); // 수평 4매치 생성

// 3. 5매치+ 테스트 (레인보우 블록 생성 확인)
// 수동으로 보드를 설정하여 5개 이상 매치 생성
```

**검증 포인트**:
- [ ] 3개 연속 블록이 정확히 감지되는가?
- [ ] 4개 연속 시 라인 블록 생성 조건이 확인되는가?
- [ ] 5개 이상 시 특수 블록 생성 조건이 확인되는가?
- [ ] 매치 점수가 올바르게 계산되는가?

### 1.2 수직 매치 테스트

**목표**: 수직 방향 매치 감지 및 처리 검증

**테스트 케이스**:
```javascript
// 수직 3매치 생성 테스트
game.testMove(4, 2, 4, 3); // 수직 3매치 생성

// 긴 수직 매치 테스트
game.testMove(5, 1, 5, 2); // 4개 이상 수직 매치
```

**검증 포인트**:
- [ ] 수직 매치가 정확히 감지되는가?
- [ ] 수평/수직 매치가 동시에 있을 때 모두 감지되는가?

### 1.3 L/T 모양 복합 매치 테스트

**목표**: 복합 패턴 매치 감지 및 특수 블록 생성 확인

**테스트 케이스**:
```javascript
// L자 패턴 생성 (수동 보드 설정 필요)
// T자 패턴 생성 (수동 보드 설정 필요)
// 십자 패턴 생성 (수동 보드 설정 필요)

// 매치 감지 테스트
const matches = game.matchDetector.findAllMatches();
game.matchDetector.printMatches(matches);
```

**검증 포인트**:
- [ ] L자 패턴이 정확히 감지되는가?
- [ ] T자 패턴이 정확히 감지되는가?
- [ ] 십자 패턴이 정확히 감지되는가?
- [ ] 복합 패턴의 특수 블록 타입이 올바르게 결정되는가?

---

## 2. 🎯 이동 검증 시스템 테스트

### 2.1 기본 이동 규칙 테스트

**목표**: 인접성, 유효성 등 기본 이동 규칙 검증

**테스트 케이스**:
```javascript
// 유효한 인접 이동
game.testMove(3, 3, 3, 4); // 위아래 인접
game.testMove(3, 3, 4, 3); // 좌우 인접

// 무효한 이동들
game.testMove(3, 3, 5, 3); // 인접하지 않음
game.testMove(3, 3, 4, 4); // 대각선 이동
game.testMove(3, 3, 3, 3); // 같은 위치
game.testMove(-1, 0, 0, 0); // 보드 밖
```

**검증 포인트**:
- [ ] 인접한 블록끼리만 교환 가능한가?
- [ ] 대각선 이동이 차단되는가?
- [ ] 보드 경계 밖 이동이 차단되는가?
- [ ] 빈 블록/장애물 이동이 차단되는가?

### 2.2 매치 생성 검증 테스트

**목표**: 이동 후 매치 생성 여부 검증

**테스트 케이스**:
```javascript
// 매치를 생성하는 이동
game.testMove(2, 3, 3, 3); // 3매치 생성하는 이동

// 매치를 생성하지 않는 이동
game.testMove(0, 0, 0, 1); // 매치 없는 이동 (거부되어야 함)

// 모든 유효한 이동 확인
game.logValidMoves();
```

**검증 포인트**:
- [ ] 매치를 생성하지 않는 이동이 거부되는가?
- [ ] 매치 예측이 정확한가?
- [ ] 예상 점수가 올바르게 계산되는가?

---

## 3. ⚡ 중력 및 연쇄 반응 테스트

### 3.1 기본 중력 시스템 테스트

**목표**: 블록 낙하 및 빈 공간 채우기 검증

**테스트 케이스**:
```javascript
// 매치 후 중력 적용 관찰
// 1. 3매치 생성하여 블록 제거
// 2. 위의 블록들이 아래로 떨어지는지 확인
// 3. 새로운 블록이 위에서 생성되는지 확인

// 중력 시스템 상태 확인
console.log(game.gravitySystem.getState());
```

**검증 포인트**:
- [ ] 매치된 블록 제거 후 위 블록들이 떨어지는가?
- [ ] 새로운 블록이 위에서 적절히 생성되는가?
- [ ] 낙하 애니메이션이 자연스러운가?
- [ ] 착지 효과가 표시되는가?

### 3.2 연쇄 반응 테스트

**목표**: 연쇄 매치 및 콤보 시스템 검증

**테스트 시나리오**:
1. 연쇄 반응을 유발할 수 있는 보드 상황 생성
2. 첫 번째 매치 생성
3. 중력 적용 후 새로운 매치 자동 생성 확인
4. 콤보 점수 및 멀티플라이어 확인

**검증 포인트**:
- [ ] 2단계 이상 연쇄 반응이 발생하는가?
- [ ] 콤보 멀티플라이어가 올바르게 적용되는가?
- [ ] 연쇄 길이가 정확히 계산되는가?
- [ ] 콤보 효과가 시각적으로 표시되는가?

---

## 4. 🎮 사용자 인터페이스 테스트

### 4.1 터치/드래그 조작 테스트

**목표**: 모바일 및 데스크톱 입력 처리 검증

**테스트 케이스**:
- **마우스 조작**: 클릭으로 블록 선택 → 인접 블록 클릭으로 이동
- **드래그 조작**: 블록을 드래그하여 인접 위치로 이동
- **터치 조작**: 모바일 기기에서 터치/드래그 테스트

**검증 포인트**:
- [ ] 블록 선택이 시각적으로 표시되는가?
- [ ] 드래그 방향 감지가 정확한가?
- [ ] 잘못된 이동 시 피드백이 제공되는가?
- [ ] 터치와 마우스 모두 정상 작동하는가?

### 4.2 게임 상태 UI 테스트

**목표**: 점수, 이동 수 등 게임 정보 표시 확인

**테스트 케이스**:
```javascript
// 게임 통계 확인
const stats = game.getGameStats();
console.log(stats);

// UI 업데이트 확인
// 매치 후 점수 증가 확인
// 이동 후 이동 수 증가 확인
```

**검증 포인트**:
- [ ] 점수가 실시간으로 업데이트되는가?
- [ ] 이동 수가 정확히 카운트되는가?
- [ ] 게임 시간이 올바르게 측정되는가?

---

## 5. 🔍 힌트 및 도움 시스템 테스트

### 5.1 힌트 시스템 테스트

**목표**: 자동 힌트 제공 및 최적 이동 추천 확인

**테스트 케이스**:
```javascript
// 수동 힌트 요청
game.showHint();

// 최적 이동 확인
const bestMove = game.moveValidator.getBestMove();
console.log('Best move:', bestMove);

// 10초 대기 후 자동 힌트 확인
```

**검증 포인트**:
- [ ] 유효한 이동이 있을 때 힌트가 표시되는가?
- [ ] 힌트가 실제로 높은 점수를 주는 이동인가?
- [ ] 10초 후 자동 힌트가 표시되는가?
- [ ] 데드락 상황에서 적절한 안내가 제공되는가?

### 5.2 데드락 감지 및 해결 테스트

**목표**: 가능한 이동이 없는 상황 감지 및 보드 섞기

**테스트 케이스**:
```javascript
// 유효한 이동 확인
const validMoves = game.moveValidator.findAllValidMoves();
console.log(`Valid moves: ${validMoves.length}`);

// 강제 섞기 테스트
game.shuffleBoard();
```

**검증 포인트**:
- [ ] 데드락 상황이 정확히 감지되는가?
- [ ] 보드 섞기가 새로운 이동 가능성을 제공하는가?
- [ ] 섞기 후에도 즉시 매치가 없는가?

---

## 6. 🚀 성능 및 안정성 테스트

### 6.1 메모리 누수 테스트

**목표**: 장시간 플레이 시 메모리 사용량 확인

**테스트 방법**:
1. 개발자 도구에서 Memory 탭 열기
2. 연속으로 100회 이동 수행
3. 가비지 컬렉션 후 메모리 사용량 확인

**검증 포인트**:
- [ ] 블록 요소가 적절히 정리되는가?
- [ ] 이벤트 리스너가 누적되지 않는가?
- [ ] 애니메이션 타이머가 정리되는가?

### 6.2 연쇄 반응 무한 루프 방지 테스트

**목표**: 연쇄 반응 시 무한 루프 방지 확인

**테스트 케이스**:
```javascript
// maxChainLength 설정 확인
console.log(game.gravitySystem.maxChainLength); // 기본값: 10

// 장시간 연쇄 반응 관찰
// 10단계 이후 강제 종료되는지 확인
```

**검증 포인트**:
- [ ] 연쇄 반응이 10단계에서 멈추는가?
- [ ] 무한 루프 방지 경고가 표시되는가?

---

## 7. 🐛 디버그 및 개발 도구 테스트

### 7.1 디버그 정보 표시

**목표**: 개발용 디버그 정보의 정확성 확인

**테스트 케이스**:
```javascript
// 디버그 모드 활성화
toggleDebug();

// 게임 상태 로깅
game.logGameState();

// 보드 상태 출력
game.gameBoard.printBoard();
```

**검증 포인트**:
- [ ] 게임 상태가 정확히 표시되는가?
- [ ] 실시간 정보 업데이트가 작동하는가?
- [ ] 모든 시스템 상태가 추적되는가?

### 7.2 콘솔 테스트 인터페이스

**목표**: 개발자 콘솔을 통한 테스트 기능 확인

**테스트 케이스**:
```javascript
// 전역 함수들 테스트
testMove(0, 0, 0, 1);    // 특정 이동 테스트
logValidMoves();         // 가능한 이동 출력
logGameState();          // 게임 상태 출력

// 게임 제어 함수들
restartGame();           // 게임 재시작
showHint();             // 힌트 표시
shuffleBoard();         // 보드 섞기
```

**검증 포인트**:
- [ ] 모든 콘솔 명령이 정상 작동하는가?
- [ ] 에러 상황에서 적절한 에러 메시지가 표시되는가?

---

## 8. 📱 모바일 호환성 테스트

### 8.1 반응형 디자인 테스트

**목표**: 다양한 화면 크기에서의 정상 작동 확인

**테스트 환경**:
- 스마트폰 (320px~414px)
- 태블릿 (768px~1024px)
- 데스크톱 (1200px+)

**검증 포인트**:
- [ ] 게임 보드가 화면에 적절히 맞춰지는가?
- [ ] 터치 영역이 충분히 큰가?
- [ ] 텍스트가 읽기 좋은 크기인가?

### 8.2 터치 반응성 테스트

**목표**: 모바일 터치 입력의 정확성 및 반응성 확인

**테스트 방법**:
1. 다양한 터치 제스처 시도
2. 빠른 연속 터치 테스트
3. 긴 터치 및 드래그 테스트

**검증 포인트**:
- [ ] 터치 이벤트가 정확히 감지되는가?
- [ ] 드래그 감도가 적절한가?
- [ ] 실수 방지 기능이 작동하는가?

---

## 9. ✅ 통합 테스트 시나리오

### 9.1 완전한 게임 플레이 시나리오

**목표**: 실제 게임 플레이 흐름 종합 테스트

**시나리오**:
1. 게임 시작
2. 10회 이상 연속 유효한 이동 수행
3. 연쇄 반응 2회 이상 달성
4. 힌트 시스템 사용
5. 보드 섞기 1회 수행
6. 게임 재시작

**검증 포인트**:
- [ ] 전체 플레이 흐름이 끊어지지 않는가?
- [ ] 모든 기능이 조화롭게 작동하는가?
- [ ] 예상치 못한 오류가 발생하지 않는가?

### 9.2 스트레스 테스트

**목표**: 극한 상황에서의 안정성 확인

**테스트 케이스**:
- 매우 빠른 연속 클릭
- 화면 회전 중 조작
- 백그라운드 전환 후 복귀
- 장시간 방치 후 조작

**검증 포인트**:
- [ ] 빠른 입력에도 안정적인가?
- [ ] 화면 전환에 잘 대응하는가?
- [ ] 메모리 관리가 적절한가?

---

## 10. 📊 테스트 결과 기록

### 테스트 실행 체크리스트

```
□ 1.1 수평 매치 테스트 - 통과/실패 날짜:____
□ 1.2 수직 매치 테스트 - 통과/실패 날짜:____
□ 1.3 L/T 모양 매치 테스트 - 통과/실패 날짜:____
□ 2.1 기본 이동 규칙 테스트 - 통과/실패 날짜:____
□ 2.2 매치 생성 검증 테스트 - 통과/실패 날짜:____
□ 3.1 기본 중력 시스템 테스트 - 통과/실패 날짜:____
□ 3.2 연쇄 반응 테스트 - 통과/실패 날짜:____
□ 4.1 터치/드래그 조작 테스트 - 통과/실패 날짜:____
□ 4.2 게임 상태 UI 테스트 - 통과/실패 날짜:____
□ 5.1 힌트 시스템 테스트 - 통과/실패 날짜:____
□ 5.2 데드락 감지 테스트 - 통과/실패 날짜:____
□ 6.1 메모리 누수 테스트 - 통과/실패 날짜:____
□ 6.2 무한 루프 방지 테스트 - 통과/실패 날짜:____
□ 7.1 디버그 정보 테스트 - 통과/실패 날짜:____
□ 7.2 콘솔 인터페이스 테스트 - 통과/실패 날짜:____
□ 8.1 반응형 디자인 테스트 - 통과/실패 날짜:____
□ 8.2 터치 반응성 테스트 - 통과/실패 날짜:____
□ 9.1 통합 게임 플레이 테스트 - 통과/실패 날짜:____
□ 9.2 스트레스 테스트 - 통과/실패 날짜:____
```

### 발견된 이슈 기록

```
이슈 #1: [날짜] [심각도] [설명]
해결책: [설명]
상태: 미해결/해결완료

이슈 #2: [날짜] [심각도] [설명]
해결책: [설명]
상태: 미해결/해결완료
```

---

이 테스트 시나리오를 통해 Sweet Puzzle Phase 1의 핵심 기능들이 설계 의도대로 정확히 구현되었는지 체계적으로 검증할 수 있습니다. 각 테스트는 독립적으로 실행 가능하며, 통합 테스트를 통해 전체 시스템의 안정성을 확인할 수 있습니다.